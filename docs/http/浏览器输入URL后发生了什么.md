# 浏览器输入 URL 后发生了什么

当你在浏览器中输入 URL 并按下回车键时，浏览器会执行一系列步骤来加载网页，这些步骤包括：

1. **URL 解析**：
   - 浏览器首先会解析 URL，将其分解成各个组成部分，如协议（[http://或 https://），主机名（如 example.com），路径（/path/to/page），查询参数（?key=value）等。](http://xn--https-wm6j//），主机名（如example.com），路径（/path/to/page），查询参数（?key=value）等。)
2. **DNS 解析**：
   - 浏览器会检查本地 DNS 缓存，看看是否已经存储了该主机名对应的 IP 地址。如果找到，就直接使用；如果没有，浏览器会发起一个 DNS 查询请求到本地 DNS 解析器，这个过程可能涉及多个 DNS 服务器，从最近的缓存开始，直至找到最终的 IP 地址。
3. **TCP 连接**：
   - 一旦得到 IP 地址，浏览器会使用 TCP 协议建立到目标服务器的连接，这个过程通常涉及三次握手。
4. **HTTP 请求**：
   - 连接建立后，浏览器会发送 HTTP 或 HTTPS 请求（取决于 URL 的协议）到服务器，请求中包含请求头和请求方法（如 GET 或 POST）。
5. **SSL/TLS 加密**：
   - 如果使用的是 HTTPS，浏览器会先与服务器进行 SSL/TLS 握手，以确保通信的安全性。
6. **服务器响应**：
   - 服务器接收到请求后，处理它，然后返回一个 HTTP 响应，响应中包含了状态码（如 200 表示成功）、响应头和响应体（通常是 HTML 内容）。
7. **HTML 解析**：
   - 浏览器接收响应后，开始解析 HTML 文档，构建 DOM 树。
8. **资源加载**：
   - 解析过程中，浏览器会发现 HTML 中引用的其他资源（如 CSS、JavaScript、图片等），并发起额外的 HTTP 请求来下载这些资源。
9. **渲染页面**：
   - CSS 文件加载后，浏览器会构建 CSSOM 树，并结合 DOM 树形成渲染树。接着，渲染引擎根据渲染树来绘制页面。
10. **JavaScript 执行**：
    - 如果 HTML 中包含 JavaScript 代码或者外部的.js 文件，浏览器会执行它们，这可能会影响 DOM 结构和样式，导致页面动态更新。
11. **页面交互**：
    - 页面完全加载后，用户可以与页面进行交互，浏览器会继续处理用户的输入和页面的动态更新。

以上就是浏览器从输入 URL 到显示网页的整个过程，这是一个高度协调和复杂的流程，涉及到网络、解析、渲染等多个层面。
